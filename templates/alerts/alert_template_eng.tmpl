{{/* 
=============================================================================
Alert Notification Template (English Version)
=============================================================================
This template is used to format AlertManager alert notification messages
Supports multiple platform formats (Telegram, Slack, Discord)
Supports optional emoji, timestamps, links, and other features
=============================================================================
*/}}

{{/* Title Section - Display different titles based on alert status */}}
{{- if gt .FiringCount 0 }}
  {{- if .FormatOptions.ShowEmoji.Enabled }}ðŸš¨ {{ end -}}
  {{- format_bold .Platform "Alert Notification" }}
{{- else if gt .ResolvedCount 0 }}
  {{- if .FormatOptions.ShowEmoji.Enabled }}âœ… {{ end -}}
  {{- format_bold .Platform "Alert Resolved" }}
{{- end }}
{{/* Basic Information Section */}}
{{ format_bold .Platform "Status:" }} {{ format_text .Platform .Status }}
{{ format_italic .Platform "Alert Name:" }} {{ format_text .Platform .AlertName }}
{{ format_italic .Platform "Environment:" }} {{ format_text .Platform .Env }}
{{ format_italic .Platform "Severity:" }} {{ format_text .Platform .Severity }}
{{ format_italic .Platform "Namespace:" }} {{ format_text .Platform .Namespace }}
{{/* Statistics Section */}}
{{ format_italic .Platform "Total Alerts:" }} {{ .TotalAlerts }}
{{- if gt .FiringCount 0 }}
{{ format_italic .Platform "Firing:" }} {{ .FiringCount -}}
{{- end }}
{{- if gt .ResolvedCount 0 }}
{{ format_italic .Platform "Resolved:" }} {{ .ResolvedCount -}}
{{- end -}}
{{/* Firing Alerts Details Section */}}
{{- if gt .FiringCount 0 }}
{{- if .FormatOptions.ShowEmoji.Enabled }}
{{ format_bold .Platform "ðŸš¨ Firing Alerts:" }}
{{- else }}
{{ format_bold .Platform "Firing Alerts:" }}
{{- end }}
{{- range $index, $alert := .Alerts }}
  {{- if eq $alert.Status "firing" }}
{{ format_bold $.Platform (printf "Alert %d:" (add $index 1)) }}
â€¢ Summary: {{ format_text $.Platform (index $alert.Annotations "summary") }}
    {{- if (index $alert.Annotations "description") }}
â€¢ Description: {{ format_text $.Platform (index $alert.Annotations "description") }}
    {{- end }}
    {{- if (index $alert.Labels "pod") }}
â€¢ Pod: {{ format_code $.Platform (index $alert.Labels "pod") }}
    {{- end }}
    
    {{- if $.FormatOptions.ShowTimestamps.Enabled }}
â€¢ Started: {{ format_time $.Platform $alert.StartsAt }}
â€¢ Ended: {{ if ne $alert.EndsAt "0001-01-01T00:00:00Z" }}{{ format_time $.Platform $alert.EndsAt }}{{ else }}Ongoing{{ end }}
    {{- end }}
    
    {{- if and $.FormatOptions.ShowGeneratorURL.Enabled $alert.GeneratorURL }}
â€¢ {{ if $.FormatOptions.ShowEmoji.Enabled }}ðŸ”— {{ end }}{{ format_link $.Platform $alert.GeneratorURL "View Details" }}{{- end -}}
    
  {{- end }}
{{- end }}
{{- end }}

{{/* Resolved Alerts Details Section */}}
{{- if gt .ResolvedCount 0 }}
{{- if .FormatOptions.ShowEmoji.Enabled }}
{{ format_bold .Platform "âœ… Resolved Alerts:" }}
{{- else }}
{{ format_bold .Platform "Resolved Alerts:" }}
{{- end }}
{{- range $index, $alert := .Alerts }}
  {{- if eq $alert.Status "resolved" }}
{{ format_bold $.Platform (printf "Alert %d:" (add $index 1)) }}
â€¢ Summary: {{ format_text $.Platform (index $alert.Annotations "summary") }}
    {{- if (index $alert.Annotations "description") }}
â€¢ Description: {{ format_text $.Platform (index $alert.Annotations "description") }}
    {{- end }}
    {{- if (index $alert.Labels "pod") }}
â€¢ Pod: {{ format_code $.Platform (index $alert.Labels "pod") }}
    {{- end }}
    
    {{- if $.FormatOptions.ShowTimestamps.Enabled }}
â€¢ Started: {{ format_time $.Platform $alert.StartsAt }}
â€¢ Ended: {{ format_time $.Platform $alert.EndsAt }}
    {{- end }}
    
    {{- if and $.FormatOptions.ShowGeneratorURL.Enabled $alert.GeneratorURL }}
â€¢ {{ if $.FormatOptions.ShowEmoji.Enabled }}ðŸ”— {{ end }}{{ format_link $.Platform $alert.GeneratorURL "View Details" }}{{- end -}}
  {{- end -}}
{{- end -}}
{{- end -}}
{{- /* External Link Section */ -}}
{{- if and .FormatOptions.ShowExternalURL.Enabled .ExternalURL }}
â€¢ {{ if .FormatOptions.ShowEmoji.Enabled }}ðŸ”— {{ end }}{{ format_link .Platform .ExternalURL "View All Alert Details" }}
{{- end }}