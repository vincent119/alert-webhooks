{{/* 
=============================================================================
è­¦æŠ¥é€šçŸ¥æ¨¡æ¿ (ç®€ä½“ä¸­æ–‡ç‰ˆ)
=============================================================================
æ­¤æ¨¡æ¿ç”¨äºæ ¼å¼åŒ– AlertManager çš„è­¦æŠ¥é€šçŸ¥æ¶ˆæ¯
æ”¯æŒå¤šç§å¹³å°æ ¼å¼ (Telegram, Slack, Discord)
æ”¯æŒå¯é€‰çš„ emojiã€æ—¶é—´æˆ³ã€é“¾æ¥ç­‰åŠŸèƒ½
=============================================================================
*/}}

{{/* æ ‡é¢˜åŒºå— - æ ¹æ®è­¦æŠ¥çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„æ ‡é¢˜ */}}
{{- if gt .FiringCount 0 }}
  {{- if .FormatOptions.ShowEmoji.Enabled }}ğŸš¨ {{ end -}}
  {{- format_bold .Platform "è­¦æŠ¥é€šçŸ¥" }}
{{- else if gt .ResolvedCount 0 }}
  {{- if .FormatOptions.ShowEmoji.Enabled }}âœ… {{ end -}}
  {{- format_bold .Platform "è­¦æŠ¥å·²è§£å†³" }}
{{- end }}
{{/* åŸºæœ¬ä¿¡æ¯åŒºå— */}}
{{ format_bold .Platform "çŠ¶æ€:" }} {{ format_text .Platform .Status }}
{{ format_italic .Platform "è­¦æŠ¥åç§°:" }} {{ format_text .Platform .AlertName }}
{{ format_italic .Platform "ç¯å¢ƒ:" }} {{ format_text .Platform .Env }}
{{ format_italic .Platform "ä¸¥é‡ç¨‹åº¦:" }} {{ format_text .Platform .Severity }}
{{ format_italic .Platform "å‘½åç©ºé—´:" }} {{ format_text .Platform .Namespace }}
{{/* ç»Ÿè®¡ä¿¡æ¯åŒºå— */}}
{{ format_italic .Platform "æ€»è­¦æŠ¥æ•°:" }} {{ .TotalAlerts }}
{{- if gt .FiringCount 0 }}
{{ format_italic .Platform "è§¦å‘ä¸­:" }} {{ .FiringCount -}}
{{- end }}
{{- if gt .ResolvedCount 0 }}
{{ format_italic .Platform "å·²è§£å†³:" }} {{ .ResolvedCount -}}
{{- end -}}
{{/* è§¦å‘ä¸­çš„è­¦æŠ¥è¯¦æƒ…åŒºå— */}}
{{- if gt .FiringCount 0 }}
{{- if .FormatOptions.ShowEmoji.Enabled }}
{{ format_bold .Platform "ğŸš¨ è§¦å‘ä¸­çš„è­¦æŠ¥:" }}
{{- else }}
{{ format_bold .Platform "è§¦å‘ä¸­çš„è­¦æŠ¥:" }}
{{- end }}
{{- range $index, $alert := .Alerts }}
  {{- if eq $alert.Status "firing" }}
{{ format_bold $.Platform (printf "è­¦æŠ¥ %d:" (add $index 1)) }}
â€¢ æ‘˜è¦: {{ format_text $.Platform (index $alert.Annotations "summary") }}
    {{- if (index $alert.Annotations "description") }}
â€¢ æè¿°: {{ format_text $.Platform (index $alert.Annotations "description") }}
    {{- end }}
    {{- if (index $alert.Labels "pod") }}
â€¢ Pod: {{ format_code $.Platform (index $alert.Labels "pod") }}
    {{- end }}
    
    {{- if $.FormatOptions.ShowTimestamps.Enabled }}
â€¢ å¼€å§‹æ—¶é—´: {{ format_time $.Platform $alert.StartsAt }}
â€¢ ç»“æŸæ—¶é—´: {{ if ne $alert.EndsAt "0001-01-01T00:00:00Z" }}{{ format_time $.Platform $alert.EndsAt }}{{ else }}è¿›è¡Œä¸­{{ end }}
    {{- end }}
    
    {{- if and $.FormatOptions.ShowGeneratorURL.Enabled $alert.GeneratorURL }}
â€¢ {{ if $.FormatOptions.ShowEmoji.Enabled }}ğŸ”— {{ end }}{{ format_link $.Platform $alert.GeneratorURL "æŸ¥çœ‹è¯¦æƒ…" }}{{- end -}}
    
  {{- end }}
{{- end }}
{{- end }}

{{/* å·²è§£å†³çš„è­¦æŠ¥è¯¦æƒ…åŒºå— */}}
{{- if gt .ResolvedCount 0 }}
{{- if .FormatOptions.ShowEmoji.Enabled }}
{{ format_bold .Platform "âœ… å·²è§£å†³çš„è­¦æŠ¥:" }}
{{- else }}
{{ format_bold .Platform "å·²è§£å†³çš„è­¦æŠ¥:" }}
{{- end }}
{{- range $index, $alert := .Alerts }}
  {{- if eq $alert.Status "resolved" }}
{{ format_bold $.Platform (printf "è­¦æŠ¥ %d:" (add $index 1)) }}
â€¢ æ‘˜è¦: {{ format_text $.Platform (index $alert.Annotations "summary") }}
    {{- if (index $alert.Annotations "description") }}
â€¢ æè¿°: {{ format_text $.Platform (index $alert.Annotations "description") }}
    {{- end }}
    {{- if (index $alert.Labels "pod") }}
â€¢ Pod: {{ format_code $.Platform (index $alert.Labels "pod") }}
    {{- end }}
    
    {{- if $.FormatOptions.ShowTimestamps.Enabled }}
â€¢ å¼€å§‹æ—¶é—´: {{ format_time $.Platform $alert.StartsAt }}
â€¢ ç»“æŸæ—¶é—´: {{ format_time $.Platform $alert.EndsAt }}
    {{- end }}
    
    {{- if and $.FormatOptions.ShowGeneratorURL.Enabled $alert.GeneratorURL }}
â€¢ {{ if $.FormatOptions.ShowEmoji.Enabled }}ğŸ”— {{ end }}{{ format_link $.Platform $alert.GeneratorURL "æŸ¥çœ‹è¯¦æƒ…" }}{{- end -}}
  {{- end -}}
{{- end -}}
{{- end -}}
{{- /* å¤–éƒ¨é“¾æ¥åŒºå— */ -}}
{{- if and .FormatOptions.ShowExternalURL.Enabled .ExternalURL }}
â€¢ {{ if .FormatOptions.ShowEmoji.Enabled }}ğŸ”— {{ end }}{{ format_link .Platform .ExternalURL "æŸ¥çœ‹æ‰€æœ‰è­¦æŠ¥è¯¦æƒ…" }}
{{- end }}